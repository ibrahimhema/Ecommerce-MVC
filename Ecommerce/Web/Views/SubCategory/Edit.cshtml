@model DAL.Model.Sub_Category


@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_adminPanel.cshtml";
    SelectList selectitem;
    selectitem = new SelectList(ViewBag.Parent, "Id", "Name");
    SelectList selectitem2 = new SelectList(ViewBag.Main, "Id", "Name", new { Id = Model.Cat_Id });
    if (Model.Parent_Id != null)
    {
        selectitem = new SelectList(ViewBag.Parent, "Id", "Name", new { Id = Model.Parent_Id });
    }
}



<h2>Edit</h2>
<div class="row">
    <div class="col-8">
        @using (Html.BeginForm("Edit", "SubCategory", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
            @Html.AntiForgeryToken()

        <div class="form-horizontal">
            <h4>Sub_Category</h4>
            <hr />
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            @Html.HiddenFor(model => model.Id)
            @Html.HiddenFor(model => model.Photo)
            <div class="form-group">
                @Html.LabelFor(model => model.Name, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Name, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.Parent_Id, "Parent_Id", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @if (Model.Parent_Id != null)
                    {
                        @Html.DropDownListFor(model => model.Parent_Id, selectitem.Append(new SelectListItem { Text = "Basic Sub Category", Value = "0" }), htmlAttributes: new { @class = "form-control" })
                    }
                    else
                    {
                        @Html.DropDownListFor(model => model.Parent_Id, selectitem.Append(new SelectListItem { Text = "Basic Sub Category", Value = "0", Selected = true }), htmlAttributes: new { @class = "form-control" })
                    }
                    @Html.ValidationMessageFor(model => model.Parent_Id, "", new { @class = "text-danger" })

                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.Cat_Id, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.DropDownListFor(model => model.Cat_Id, selectitem2, htmlAttributes: new { @class = "form-control" })
                    @Html.ValidationMessageFor(model => model.Cat_Id, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                <div class="col-md-10">
                    <label for="file">
                        Image :
                        <input type="file" id="file" name="file" style="opacity:1;position:relative">
                    </label>
                </div>
            </div>

            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="Update" class="btn btn-default" />
                </div>
            </div>
        </div>
        }

        <div>
            @Html.ActionLink("Back to List", "Index")
        </div>
    </div>
    <div class="col-4">
        <h4 style="color:darkblue;font-weight:bold;opacity:0.8">Category Image now</h4><br><br>
        <img src="~/Content/Imgs/Sub_Categories/@Model.Photo" width="200" height="200" alt="No image for this Category" />
    </div>
</div>

    @section Scripts {
        @Scripts.Render("~/bundles/jqueryval")
    }
